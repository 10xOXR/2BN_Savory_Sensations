{% extends "base.html" %}
{% block content %}

<div class="container-main">
    <h5>
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        {{ message }}
        {% endfor %}
        {% endif %}
        {% endwith %}
    </h5>



    <div class="card row">
        <div class="col s12 m5 card-image">
            {% if recipe.imgUrl %}
            <img src="{{ recipe.imgUrl }}" alt="Recipe Image">
            {% else %}
            <img src="{{ url_for('static', filename='img/no_img.jpg') }}" alt="No Image">
            {% endif %}
        </div>
        <h3 class="center-align bold col s12 m7">{{ recipe.recipeName }}</h3>
        <div class="center-align col s12 m3">
            <p><span class="bold">Prep Time:</span> {{ recipe.prepTime }} minutes</p>
            <p><span class="bold">Cook Time:</span> {{ recipe.cookTime }} minutes</p>
        </div>
        <div class="center-align col s12 m3 offset-m1">
            <p><span class="bold">Temp:</span> {{ recipe.temp }} Â°C</p>
            <p><span class="bold">Author:</span> {{ author }}</p>
        </div>
        <div class="center-align col s12 m7">
            <p><em>{{ recipe.recipeDesc }}</em></p>
        </div>
    </div>
    <div class="row">
        <div class="card col s12 m4 l4">
            <h5 class="bold">Ingredients</h5>
            <ul>
                {% for ing in recipe.ingredients %}
                <li>
                    <p>&#9658; {{ ing }}</p>
                </li>
                {% endfor %}
            </ul>
        </div>
        <div class=" card col s12 m7 offset-m1 l7 offset-l1">
            <h5 class="bold">Preparation Steps</h5>
            <ol>
                {% for step in recipe.prepSteps %}
                <li>
                    <p> {{ step }}</p>
                </li>
                {% endfor %}
            </ol>
        </div>
        <div class="center-align  col s12">
            <a class="waves-effect waves-light btn site-blue-bg" href="javascript:history.back()">Go Back</a>
            {% if session.user %}
            {% if recipe._id in favourites %}
            <a class="waves-effect waves-light btn blue"
                href="{{ url_for('remove_favourite', recipe_id=recipe._id) }}">Remove Favourite</a>
            {% else %}
            <a class="waves-effect waves-light btn" href="{{ url_for('add_favourite', recipe_id=recipe._id) }}">Add
                Favourite</a>
            {% endif %}
            {% if session.user == author|lower %}
            <a class="waves-effect waves-light btn orange text-shadow" href="{{ url_for('update_recipe', recipe_id=recipe._id) }}">Edit</a>
            <a class="waves-effect waves-light red btn text-shadow modal-trigger" href="#modal-delete">Delete</a>
            {% endif %}
            {% endif %}
        </div>
    </div>

    <!-- Modal Structure -->
    <div id="modal-delete" class="modal">
        <div class="modal-content">
            <h4>Delete Recipe</h4>
            <h5>Are you sure? This can't be undone.</h5>
        </div>
        <div class="modal-footer">
            <a class="waves-effect waves-light red btn "
                href="{{ url_for('delete_recipe', recipe_id=recipe._id) }}">Delete
                Recipe</a>
            <a href="#!" class="modal-close waves-effect waves-light btn">Cancel</a>
        </div>
    </div>
</div>
{% endblock %}